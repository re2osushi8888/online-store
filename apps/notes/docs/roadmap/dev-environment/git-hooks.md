---
sidebar_position: 4
---

# Git Hook設定

## 概要

Gitコミット時・プッシュ時の品質チェックを自動化し、コードベースの品質を維持するためのフック設定を行います。

## 進捗状況

- **優先度**: 中
- **状況**: 📋 予定
- **予定完了**: 2024年2月
- **担当者**: 未定

## 実装予定項目

### 1. pre-commit hooks設定
**目標**: コミット前の自動品質チェック

**チェック項目**:
- [ ] ESLintによるコード品質チェック
- [ ] TypeScriptコンパイルチェック
- [ ] フォーマットチェック（ESLint Stylistic）
- [ ] テストの実行（関連ファイルのみ）
- [ ] ファイルサイズチェック

**技術選択**:
- **husky**: Git hooksの管理
- **lint-staged**: ステージされたファイルのみ処理

### 2. commit-msg hooks設定
**目標**: コミットメッセージの標準化

**チェック項目**:
- [ ] Conventional Commits形式の強制
- [ ] コミットメッセージの文字数制限
- [ ] 日本語・英語の混在チェック
- [ ] 禁止ワードのチェック

**メッセージ形式**:
```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**type例**:
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメント
- `style`: フォーマット
- `refactor`: リファクタリング
- `test`: テスト

### 3. pre-push hooks設定
**目標**: プッシュ前の最終チェック

**チェック項目**:
- [ ] 全テストの実行
- [ ] ビルドの成功確認
- [ ] セキュリティ脆弱性チェック
- [ ] 依存関係の整合性確認

## 設定ファイル構成（予定）

```
online-store/
├── .husky/
│   ├── pre-commit         # コミット前フック
│   ├── commit-msg         # コミットメッセージフック
│   └── pre-push          # プッシュ前フック
├── .lintstagedrc.json    # lint-staged設定
├── .commitlintrc.json    # コミットメッセージ設定
└── package.json          # husky設定
```

## 実装計画

### フェーズ1: 基本フック設定（3日間）
- huskyのセットアップ
- pre-commitフックの実装
- lint-stagedの設定

### フェーズ2: コミットメッセージ管理（2日間）
- commitlintの導入
- commit-msgフックの実装
- メッセージテンプレート作成

### フェーズ3: 高度なチェック（2日間）
- pre-pushフックの実装
- セキュリティチェック統合
- パフォーマンステスト

## 期待効果

### 品質向上
- コミット時点でのエラー早期発見
- 一貫したコードスタイルの維持
- テストカバレッジの向上

### 開発効率
- レビュー時間の短縮
- バグの早期発見・修正
- CI/CD失敗率の低下

### チーム統一
- コミットメッセージの標準化
- コーディング規約の自動遵守
- 新メンバーのオンボーディング支援

## エスケープハッチ

緊急時のフック無効化方法:
```bash
# 一時的にフックを無効化
git commit --no-verify

# フック自体を無効化
git config core.hooksPath /dev/null
```

## 成功指標

- [ ] 全開発者のマシンでフックが正常動作
- [ ] コミットメッセージ規約遵守率100%
- [ ] pre-commitエラー率5%未満
- [ ] CI/CD初回成功率95%以上 